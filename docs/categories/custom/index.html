<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Category — Custom Rules | mllint — Linter for Machine Learning projects</title><meta name=keywords content><meta name=description content="- `custom`"><meta name=author content="Bart van Oort (bvobart)"><link rel=canonical href=http://bvobart.github.io/mllint/docs/categories/custom/><link crossorigin=anonymous href=/mllint/assets/css/stylesheet.min.2ccc4c0427fed56ea6a0922719943a3539814663f49592d51fe456d648263cb0.css integrity="sha256-LMxMBCf+1W6moJInGZQ6NTmBRmP0lZLVH+RW1kgmPLA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/mllint/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=http://bvobart.github.io/mllint/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://bvobart.github.io/mllint/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://bvobart.github.io/mllint/favicon-32x32.png><link rel=apple-touch-icon href=http://bvobart.github.io/mllint/apple-touch-icon.png><link rel=mask-icon href=http://bvobart.github.io/mllint/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.85.0"><meta property="og:title" content="Category — Custom Rules"><meta property="og:description" content="- `custom`"><meta property="og:type" content="article"><meta property="og:url" content="http://bvobart.github.io/mllint/docs/categories/custom/"><meta property="og:image" content="http://bvobart.github.io/mllint/example-run.svg"><meta property="article:section" content="docs"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://bvobart.github.io/mllint/example-run.svg"><meta name=twitter:title content="Category — Custom Rules"><meta name=twitter:description content="- `custom`"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Documentation","item":"http://bvobart.github.io/mllint/docs/"},{"@type":"ListItem","position":3,"name":"Categories","item":"http://bvobart.github.io/mllint/docs/categories/"},{"@type":"ListItem","position":4,"name":"Category — Custom Rules","item":"http://bvobart.github.io/mllint/docs/categories/custom/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Category — Custom Rules","name":"Category — Custom Rules","description":"- `custom`","keywords":[],"articleBody":"This category enables you to write your own custom evaluation rules for mllint. Custom rules can be useful for enforcing team, company or organisational practices, as well as implementing checks and analyses for how your proprietary / closed-source tools are being used. Custom rules may also be useful for creating ‘plugins’ to mllint, that implement checks on tools that mllint does not yet have built-in rules for.\nmllint will pick up these custom rules from your configuration and automatically run their checks during its analysis. It is also possible to use the mllint describe command with custom rules. Similarly, mllint list all also lists all custom linting rules.\n To create such a custom rule, write a script or program that checks whether your project adheres to a certain practice and prints a simple YAML or JSON object containing the score for this rule, possibly along with some detail text. Then, add the rule’s name, slug, details and run command to your project’s mllint config.\nThe following snippet of a YAML mllint configuration is an example of how a custom rule can be configured. See the table below for more details about each of the custom rule definition’s properties.\nrules: custom: - name: Project contains a LICENSE file slug: custom/is-licensed details: This rule checks whether the project contains a LICENSE or LICENSE.md file at the project's root. weight: 1 run: bash ./scripts/mllint/check-license.sh The equivalent configuration in TOML syntax (for pyproject.toml files) is as follows. Multiple of these snippets can be repeated for defining more rules.\n[[tool.mllint.rules.custom]] name = \"Project contains a LICENSE file\" slug = \"custom/is-licensed\" details = \"This rule checks whether the project contains a LICENSE or LICENSE.md file at the project's root.\" weight = 1.0 run = \"bash ./scripts/mllint/check-license.sh\"    Property Type Description     name string A short and concise sentence on what this rule expects of a project / what the rule enforces on the project. Feel free to take inspiration from the names given to mllint’s built-in rules.   slug string A unique and URL-friendly identifier for each rule. Should only consist of lowercased letters with dashes for spaces, optionally using slashes for categorisation. For custom rule definitions, the recommended convention is for their slugs to always start with custom/   details string A longer, descriptive, Markdown-formatted text that explains the rule in more detail. This text should explain… 1) what exactly the rule checks; 2) why the rule checks what it checks, i.e., why is this practice important?; and 3) how should a user fix violations of this rule?   weight float The weight of this rule compared to other rules in the same category. This is used for calculating the category score as a weighted average of the scores of all rules. Zero weight means the rule’s results will be shown in the report, but won’t count for the category score. Note that YAML accepts any number for this property, e.g. 4, but TOML is more strict with typing and requires you to specify a number with a decimal point, e.g. 4.0   run string The command to run for evaluating this rule. This command will be run in the project’s root directory. Note that the command will be run using Golang’s os/exec package, which “intentionally does not invoke the system shell and does not expand any glob patterns or handle other expansions, pipelines, or redirections typically done by shells.\" To run shell commands, invoke the shell directly using e.g. bash -c 'your command \u0026\u0026 here' or using the example above to execute shell scripts.    The command specified with run is expected to print a simple YAML (or JSON) object with the following structure:\n   Property Type Description     score float The score given to the rule. Must be a number between 0 and 100, i.e., the score is a percentage indicating the degree to which the project adheres to the implemented rule.   details string A Markdown-formatted piece of text that provides details about the given score and what the user can do to fix a violation of this rule. Where applicable, you may also use this to congratulate the user on successful implementation of this rule.    For an example implementation, consider the rule defined in the example configuration above. The script below is a possible implementation of the ./scripts/mllint/check-license.sh script that is referred to by the example.\n#!/bin/bash if [[ -f LICENSE ]] || [[ -f LICENSE.md ]]; then echo 'score: 100' else echo 'score: 0' echo 'details: \"Your project is missing a LICENSE. Please be sure to include our [company license file](https://link.to/company/license-file/) in your project.\"' fi ","wordCount":"755","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Bart van Oort (bvobart)"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://bvobart.github.io/mllint/docs/categories/custom/"},"publisher":{"@type":"Organization","name":"mllint — Linter for Machine Learning projects","logo":{"@type":"ImageObject","url":"http://bvobart.github.io/mllint/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=http://bvobart.github.io/mllint accesskey=h title="mllint — Linter for Machine Learning projects (Alt + H)">mllint — Linter for Machine Learning projects</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=http://bvobart.github.io/mllint/docs/ title=Docs><span>Docs</span></a></li><li><a href=http://bvobart.github.io/mllint/docs/installation/ title=Installation><span>Installation</span></a></li><li><a href=http://bvobart.github.io/mllint/docs/usage/ title=Usage><span>Usage</span></a></li><li><a href=http://bvobart.github.io/mllint/docs/categories title=Categories><span>Categories</span></a></li><li><a href=http://bvobart.github.io/mllint/docs/rules title=Rules><span>Rules</span></a></li><li><a href=http://bvobart.github.io/mllint/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://bvobart.github.io/mllint>Home</a>&nbsp;»&nbsp;<a href=http://bvobart.github.io/mllint/docs/>Documentation</a>&nbsp;»&nbsp;<a href=http://bvobart.github.io/mllint/docs/categories/>Categories</a></div><h1 class=post-title>Category — Custom Rules</h1><div class=post-description><ul><li><code>custom</code></li></ul></div><div class=post-meta>4 min&nbsp;·&nbsp;Bart van Oort (bvobart)</div></header><div class=post-content><p>This category enables you to write your own custom evaluation rules for <code>mllint</code>.
Custom rules can be useful for enforcing team, company or organisational practices,
as well as implementing checks and analyses for how your proprietary / closed-source tools are being used.
Custom rules may also be useful for creating &lsquo;plugins&rsquo; to <code>mllint</code>, that implement checks on tools
that <code>mllint</code> does not yet have built-in rules for.</p><p><code>mllint</code> will pick up these custom rules from your configuration and automatically run their checks during its analysis.
It is also possible to use the <code>mllint describe</code> command with custom rules. Similarly, <code>mllint list all</code> also lists all custom linting rules.</p><hr><p>To create such a custom rule, write a script or program that checks whether your project adheres to a certain practice and prints a simple YAML or JSON object
containing the score for this rule, possibly along with some detail text. Then, add the rule&rsquo;s name, slug, details and run command
to your project&rsquo;s <code>mllint</code> config.</p><p>The following snippet of a YAML <code>mllint</code> configuration is an example of how a custom rule can be configured.
See the table below for more details about each of the custom rule definition&rsquo;s properties.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>rules</span>:
  <span style=color:#f92672>custom</span>:
    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Project contains a LICENSE file</span>
      <span style=color:#f92672>slug</span>: <span style=color:#ae81ff>custom/is-licensed</span>
      <span style=color:#f92672>details</span>: <span style=color:#ae81ff>This rule checks whether the project contains a LICENSE or LICENSE.md file at the project&#39;s root.</span>
      <span style=color:#f92672>weight</span>: <span style=color:#ae81ff>1</span>
      <span style=color:#f92672>run</span>: <span style=color:#ae81ff>bash ./scripts/mllint/check-license.sh</span>
</code></pre></div><p>The equivalent configuration in TOML syntax (for <code>pyproject.toml</code> files) is as follows. Multiple of these snippets can be repeated for defining more rules.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml>[[<span style=color:#a6e22e>tool</span>.<span style=color:#a6e22e>mllint</span>.<span style=color:#a6e22e>rules</span>.<span style=color:#a6e22e>custom</span>]]
<span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;Project contains a LICENSE file&#34;</span>
<span style=color:#a6e22e>slug</span> = <span style=color:#e6db74>&#34;custom/is-licensed&#34;</span>
<span style=color:#a6e22e>details</span> = <span style=color:#e6db74>&#34;This rule checks whether the project contains a LICENSE or LICENSE.md file at the project&#39;s root.&#34;</span>
<span style=color:#a6e22e>weight</span> = <span style=color:#ae81ff>1.0</span>
<span style=color:#a6e22e>run</span> = <span style=color:#e6db74>&#34;bash ./scripts/mllint/check-license.sh&#34;</span>
</code></pre></div><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td>string</td><td>A short and concise sentence on what this rule expects of a project / what the rule enforces on the project. Feel free to take inspiration from the names given to <code>mllint</code>&rsquo;s built-in rules.</td></tr><tr><td><code>slug</code></td><td>string</td><td>A unique and URL-friendly identifier for each rule. Should only consist of lowercased letters with dashes for spaces, optionally using slashes for categorisation. For custom rule definitions, the recommended convention is for their slugs to always start with <code>custom/</code></td></tr><tr><td><code>details</code></td><td>string</td><td>A longer, descriptive, Markdown-formatted text that explains the rule in more detail. This text should explain&mldr; <em>1)</em> what exactly the rule checks; <em>2)</em> why the rule checks what it checks, i.e., why is this practice important?; and 3) how should a user fix violations of this rule?</td></tr><tr><td><code>weight</code></td><td>float</td><td>The weight of this rule compared to other rules in the same category. This is used for calculating the category score as a weighted average of the scores of all rules. Zero weight means the rule&rsquo;s results will be shown in the report, but won&rsquo;t count for the category score. Note that YAML accepts any number for this property, e.g. <code>4</code>, but TOML is more strict with typing and requires you to specify a number with a decimal point, e.g. <code>4.0</code></td></tr><tr><td><code>run</code></td><td>string</td><td>The command to run for evaluating this rule. This command will be run in the project&rsquo;s root directory. Note that the command will be run using Golang&rsquo;s <a href=https://pkg.go.dev/os/exec><code>os/exec</code></a> package, which <em>&ldquo;intentionally does not invoke the system shell and does not expand any glob patterns or handle other expansions, pipelines, or redirections typically done by shells."</em> To run shell commands, invoke the shell directly using e.g. <code>bash -c 'your command && here'</code> or using the example above to execute shell scripts.</td></tr></tbody></table><p>The command specified with <code>run</code> is expected to print a simple YAML (or JSON) object with the following structure:</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>score</code></td><td>float</td><td>The score given to the rule. Must be a number between 0 and 100, i.e., the score is a percentage indicating the degree to which the project adheres to the implemented rule.</td></tr><tr><td><code>details</code></td><td>string</td><td>A Markdown-formatted piece of text that provides details about the given score and what the user can do to fix a violation of this rule. Where applicable, you may also use this to congratulate the user on successful implementation of this rule.</td></tr></tbody></table><p>For an example implementation, consider the rule defined in the example configuration above. The script below is a possible implementation of the <code>./scripts/mllint/check-license.sh</code> script that is referred to by the example.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e>#!/bin/bash
</span><span style=color:#75715e></span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> -f LICENSE <span style=color:#f92672>]]</span> <span style=color:#f92672>||</span> <span style=color:#f92672>[[</span> -f LICENSE.md <span style=color:#f92672>]]</span>; <span style=color:#66d9ef>then</span>
  echo <span style=color:#e6db74>&#39;score: 100&#39;</span>
<span style=color:#66d9ef>else</span>
  echo <span style=color:#e6db74>&#39;score: 0&#39;</span>
  echo <span style=color:#e6db74>&#39;details: &#34;Your project is missing a LICENSE. Please be sure to include our [company license file](https://link.to/company/license-file/) in your project.&#34;&#39;</span>
<span style=color:#66d9ef>fi</span>
</code></pre></div></div><footer class=post-footer><nav class=paginav><a class=prev href=http://bvobart.github.io/mllint/docs/categories/ci/><span class=title>« Prev Page</span><br><span>Category — Continuous Integration</span></a>
<a class=next href=http://bvobart.github.io/mllint/docs/categories/data-quality/><span class=title>Next Page »</span><br><span>Category — Data Quality</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2021 <a href=http://bvobart.github.io/mllint>mllint — Linter for Machine Learning projects</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a><footer class=footer-version><span>mllint version:</span>
<span><a href=https://github.com/bvobart/mllint/releases/tag/v0.11.0 rel="noopener noreferrer" target=_blank>v0.11.0</a></span><br><span>Git ref:</span>
<span>v0.11.0-10-g6aaa32a</span></footer><script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script><script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script></body></html>